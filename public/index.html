<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<title>Deel je locatie</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
    /* Algemene stijlen */
    body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background: #f0f4f8;
        height: 100%;
    }

    /* Hero banner */
    .hero {
        background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
        color: white;
        text-align: center;
        padding: 80px 20px 40px 20px;
    }

    .hero h1 {
        font-size: 3rem;
        margin: 0 0 20px 0;
        letter-spacing: 1px;
    }

    .hero p {
        font-size: 1.2rem;
        margin: 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    /* Middelste tekstvak */
    .content {
        background: white;
        max-width: 500px;
        margin: -40px auto 0 auto; /* overlap hero */
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
    }

    .content p {
        font-size: 1rem;
        color: #333;
        margin-bottom: 20px;
    }

    /* Knop */
    button {
        background: #2575fc;
        color: white;
        border: none;
        padding: 12px 30px;
        font-size: 1rem;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    button:hover {
        background: #6a11cb;
    }

    /* Status tekst */
    #status {
        margin-top: 15px;
        font-weight: 500;
        color: #555;
    }

    /* Responsive */
    @media(max-width:600px){
        .hero h1 { font-size: 2.2rem; }
        .hero p { font-size: 1rem; }
        .content { margin: -30px 20px 0 20px; padding: 20px; }
    }
</style>
</head>
<body>

<div class="hero">
    <h1>Deel je locatie</h1>
    <p>Sta ons toe je locatie te gebruiken zodat we je ervaringen kunnen verbeteren en de juiste content kunnen tonen.</p>
</div>

<div class="content">
    <p>Klik op de knop hieronder om je huidige locatie te delen.</p>
    <button id="shareBtn">Deel mijn locatie</button>
    <p id="status"></p>
</div>

<script>
const btn = document.getElementById('shareBtn');
const status = document.getElementById('status');

btn.addEventListener('click', async () => {
  if (!navigator.geolocation) {
    status.textContent = 'Geolocatie wordt niet ondersteund door deze browser.';
    return;
  }

  status.textContent = 'Locatie ophalen...';

  navigator.geolocation.getCurrentPosition(async (pos) => {
    const latitude = pos.coords.latitude;
    const longitude = pos.coords.longitude;

    status.textContent = `Locatie gevonden: ${latitude.toFixed(6)}, ${longitude.toFixed(6)} — verzenden...`;

    try {
      const resp = await fetch('/report-location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ latitude, longitude, label: 'Website bezoeker' })
      });
      const data = await resp.json();
      if (data.ok) {
        status.textContent = 'Locatie succesvol gedeeld ✔';
      } else {
        status.textContent = 'Serverfout bij opslaan locatie.';
      }
    } catch (err) {
      status.textContent = 'Fout bij verzenden: ' + err.message;
    }
  }, (err) => {
    switch (err.code) {
      case err.PERMISSION_DENIED:
        status.textContent = 'Je hebt de locatie aanvraag geweigerd.';
        break;
      case err.POSITION_UNAVAILABLE:
        status.textContent = 'Locatie onbeschikbaar.';
        break;
      case err.TIMEOUT:
        status.textContent = 'Tijd verstreken bij ophalen locatie.';
        break;
      default:
        status.textContent = 'Onbekende fout bij geolocatie.';
    }
  }, { enableHighAccuracy: false, timeout: 10000 });
});
</script>

</body>
</html>
